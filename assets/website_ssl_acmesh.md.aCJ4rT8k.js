import{_ as h,c as k,j as s,a,G as n,a4 as t,o as d,C as l}from"./chunks/framework.DBf_wRcB.js";const c="/ssl/acmesh/acmesh-01.png",r="/ssl/acmesh/acmesh-02.png",g="/ssl/acmesh/acmesh-03.png",o="/ssl/acmesh/acmesh-04.png",F="/ssl/acmesh/acmesh-05.png",y="/ssl/acmesh/acmesh-06.png",C="/ssl/acmesh/acmesh-07.png",m="/ssl/acmesh/acmesh-08.png",u="/ssl/acmesh/acmesh-09.png",B="/ssl/acmesh/acmesh-10.png",b="/ssl/acmesh/acmesh-11.png",x="/ssl/acmesh/acmesh-12.png",E="/ssl/acmesh/acmesh-13.png",v="/ssl/acmesh/webroot/webroot-01.png",D="/ssl/acmesh/standalone/standalone-01.png",A="/ssl/acmesh/standalone/standalone-02.png",f="/ssl/acmesh/alpn/alpn-01.png",w="/ssl/acmesh/alpn/alpn-02.png",_="/ssl/acmesh/dnsapi/dnsapi-01.png",S="/ssl/acmesh/dnsapi/dnsapi-02.png",N="/ssl/acmesh/dnsapi/dnsapi-03.png",z="/ssl/acmesh/dnsapi/dnsapi-04.png",I="/ssl/acmesh/dnsapi/dnsapi-05.png",P="/ssl/acmesh/dnsapi/dnsapi-06.png",q="/ssl/acmesh/dnsapi/dnsapi-07.png",T="/ssl/acmesh/dnsmanual/dnsmanual-01.png",V="/ssl/acmesh/dnsmanual/dnsmanual-02.png",L="/ssl/acmesh/dnsmanual/dnsmanual-03.png",O="/ssl/acmesh/dnsmanual/dnsmanual-04.png",H="/ssl/acmesh/dnsalias/dnsalias-01.png",X="/ssl/acmesh/nginx/nginx-01.png",M="/ssl/acmesh/nginx/nginx-02.png",$="/ssl/acmesh/acmesh-14.png",K="/ssl/acmesh/acmesh-15.png",R="/ssl/acmesh/acmesh-16.png",as=JSON.parse('{"title":"acme.sh申请SSL证书","description":"","frontmatter":{},"headers":[],"relativePath":"website/ssl/acmesh.md","filePath":"website/ssl/acmesh.md","lastUpdated":null}'),Z={name:"website/ssl/acmesh.md"},j={tabindex:"0"},G={style:{"text-align":"center"}};function W(J,i,U,Q,Y,ss){const e=l("ArticleMetadata"),p=l("Badge");return d(),k("div",null,[i[14]||(i[14]=s("h1",{id:"acme-sh申请ssl证书",tabindex:"-1"},[a("acme.sh申请SSL证书 "),s("a",{class:"header-anchor",href:"#acme-sh申请ssl证书","aria-label":'Permalink to "acme.sh申请SSL证书"'},"​")],-1)),n(e),i[15]||(i[15]=t('<h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><p>acme.sh 是一个由 <a href="https://x.com/neilpangxa" target="_blank" rel="noreferrer">@neilpangxa</a> 使用Bash编写的脚本，集成了 acme 协议的SSL证书申请工具</p><p>官网：<a href="https://acme.sh" target="_blank" rel="noreferrer">https://acme.sh</a></p><p>项目：<a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noreferrer">https://github.com/acmesh-official/acme.sh</a></p><p>wiki：<a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">https://github.com/acmesh-official/acme.sh/wiki/</a></p><p><img src="'+c+'" alt="" loading="lazy"></p><h2 id="免费方案" tabindex="-1">免费方案 <a class="header-anchor" href="#免费方案" aria-label="Permalink to &quot;免费方案&quot;">​</a></h2><ul><li><p>证书数量：无限制</p></li><li><p>有效期：90天</p></li><li><p>通配符/泛解析：支持</p></li><li><p>验证方式：HTTP文件验证、DNS验证、tls alpn独立验证、Apache服务验证、Nginx服务验证、无状态模式验证</p></li><li><p>自动续签：支持</p></li></ul><details class="details custom-block"><summary>什么是 通配符 和 泛解析</summary><ul><li><p>通配符 <code>*</code>：是泛解析的一个必用字符，用来表示当前级</p></li><li><p>通配符证书：可以多个二级域名或三级域名共用一个证书，只需要申请一张即可</p></li></ul><table tabindex="0"><thead><tr><th style="text-align:center;">域名/示例</th><th style="text-align:center;">泛解析</th><th style="text-align:center;">包含</th><th style="text-align:center;">不包含</th></tr></thead><tbody><tr><td style="text-align:center;">一级域名</td><td style="text-align:center;">❌</td><td style="text-align:center;">baidu.com</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">二级域名</td><td style="text-align:center;">*.baidu.com</td><td style="text-align:center;">baike.baidu.com<br>www.baidu.com<br>...</td><td style="text-align:center;">baidu.com</td></tr><tr><td style="text-align:center;">三级域名</td><td style="text-align:center;">*.bce.baidu.com</td><td style="text-align:center;">login.bce.baidu.com<br>h5.bce.baidu.com<br>...</td><td style="text-align:center;">*.baidu.com<br>bce.baidu.com</td></tr><tr><td style="text-align:center;">依次类推</td><td style="text-align:center;">...</td><td style="text-align:center;">...</td><td style="text-align:center;">...</td></tr></tbody></table></details><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><blockquote><p>本次用 <code>CentOS 7</code> 演示，其他系统可以参照</p><p>开始前，请用SSH工具连接服务器</p></blockquote><p>打开 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>Install</code>，点击 <a href="https://github.com/acmesh-official/acme.sh/wiki/Install-preparations" target="_blank" rel="noreferrer">Install-preparations</a></p><p><img src="'+r+'" alt="" loading="lazy"></p><p>我是 Centos 系统，复制命令安装工具，像如下图提示，就是已经安装过了</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crontabs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> socat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span></span></code></pre></div><p><img src="'+g+'" alt="" loading="lazy"></p><p>再次在 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>Install</code>，点击 <a href="https://github.com/acmesh-official/acme.sh/wiki/How-to-install" target="_blank" rel="noreferrer">How-to-install</a></p><p><img src="'+o+'" alt="" loading="lazy"></p><p>根据官方建议使用最新的CA包，以免生成证书出现问题，复制升级命令，提示输入y</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ca-certificates</span></span></code></pre></div><p><img src="'+F+'" alt="" loading="lazy"></p><p>接下来正式开始安装，复制命令，将 <code>my@example.com</code> 改成自己的真实邮箱，粘贴到运行</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.acme.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> email=my@example.com</span></span></code></pre></div><details class="details custom-block"><summary>安装成功后，提示的命令是什么</summary><ul><li>Installing to /root/.acme.sh：默认安装目录</li><li>Installed to /root/.acme.sh/acme.sh：主程序目录</li><li>Installing alias to &#39;/root/.bashrc&#39;：安装别名.bashrc</li><li>Installing alias to &#39;/root/.cshrc&#39;：安装别名.cshrc</li><li>Installing alias to &#39;/root/.tcshrc&#39;：安装别名.tcshrc</li><li>Installing cron job：定时任务</li><li>Close and reopen your terminal to start using acme.sh：关闭SSH工具，重新连接使用</li></ul></details><p><img src="'+y+'" alt="" loading="lazy"></p><p>直接用 <code>source</code> 命令刷新bashrc配置文件，不需要重连，让别名生效</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.bashrc</span></span></code></pre></div><p><img src="'+C+'" alt="" loading="lazy"></p><p>还默认给我们设置了一个定时任务，每天19点45分自动检测并更新证书</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span></span></code></pre></div><p><img src="'+m+'" alt="" loading="lazy"></p><p>输入 acme.sh 可以查看当前版本及使用命令</p><p><img src="'+u+'" alt="" loading="lazy"></p><p>最后，我们升级并设置自动升级</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --auto-upgrade</span></span></code></pre></div><p><img src="'+B+'" alt="" loading="lazy"></p><h2 id="更改默认证书" tabindex="-1">更改默认证书 <a class="header-anchor" href="#更改默认证书" aria-label="Permalink to &quot;更改默认证书&quot;">​</a></h2><p>现在默认CA是 ZeroSSL ，可 <a href="https://github.com/acmesh-official/acme.sh/wiki/Change-default-CA-to-ZeroSSL" target="_blank" rel="noreferrer">根据文档</a> 按需修改</p><table tabindex="0"><thead><tr><th style="text-align:center;">CA机构</th><th style="text-align:center;">简称</th><th style="text-align:center;">天数</th><th style="text-align:center;">域名数量</th><th style="text-align:center;">通配符</th><th style="text-align:center;">ECC</th><th style="text-align:center;">IDNs</th></tr></thead><tbody><tr><td style="text-align:center;"><a href="https://letsencrypt.org/zh-cn/" target="_blank" rel="noreferrer">Let&#39;s Encrypt</a></td><td style="text-align:center;">letsencrypt</td><td style="text-align:center;">90天</td><td style="text-align:center;">100个</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td></tr><tr><td style="text-align:center;"><a href="https://zerossl.com/" target="_blank" rel="noreferrer">ZeroSSL</a></td><td style="text-align:center;">zerossl</td><td style="text-align:center;">90天</td><td style="text-align:center;">100个</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td></tr><tr><td style="text-align:center;"><a href="https://pki.goog/" target="_blank" rel="noreferrer">Google</a></td><td style="text-align:center;">google</td><td style="text-align:center;">90天</td><td style="text-align:center;">100个</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td><td style="text-align:center;">❌</td></tr><tr><td style="text-align:center;"><a href="https://www.buypass.com/" target="_blank" rel="noreferrer">Buypass</a></td><td style="text-align:center;">buypass</td><td style="text-align:center;">180天</td><td style="text-align:center;">5个</td><td style="text-align:center;">💲付费</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td></tr><tr><td style="text-align:center;"><a href="https://www.ssl.com/" target="_blank" rel="noreferrer">SSL.com</a></td><td style="text-align:center;">sslcom</td><td style="text-align:center;">90天</td><td style="text-align:center;">2个</td><td style="text-align:center;">💲付费</td><td style="text-align:center;">✔️</td><td style="text-align:center;">✔️</td></tr></tbody></table><p>用命令看一下默认的CA</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --info</span></span></code></pre></div><p><img src="'+b+'" alt="" loading="lazy"></p><p>我们可以改成Let&#39;s Encrypt或其他</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set-default-ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> letsencrypt</span></span></code></pre></div><p><img src="'+x+'" alt="" loading="lazy"></p><h2 id="申请证书" tabindex="-1">申请证书 <a class="header-anchor" href="#申请证书" aria-label="Permalink to &quot;申请证书&quot;">​</a></h2><p>在 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>issue</code>，点击 <a href="https://github.com/acmesh-official/acme.sh/wiki/How-to-issue-a-cert" target="_blank" rel="noreferrer">How to issue a cert</a></p><p><img src="'+E+'" alt="" loading="lazy"></p>',48)),s("table",j,[i[13]||(i[13]=s("thead",null,[s("tr",null,[s("th",{style:{"text-align":"center"}},"申请模式"),s("th",{style:{"text-align":"center"}},"单域名"),s("th",{style:{"text-align":"center"}},"多域名"),s("th",{style:{"text-align":"center"}},"泛域名"),s("th",{style:{"text-align":"center"}},"方式")])],-1)),s("tbody",null,[i[5]||(i[5]=s("tr",null,[s("td",{style:{"text-align":"center"}},"webroot"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❌"),s("td",{style:{"text-align":"center"}},"http文件验证，需有Nginx等web服务器")],-1)),i[6]||(i[6]=s("tr",null,[s("td",{style:{"text-align":"center"}},"Standalone"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❌"),s("td",{style:{"text-align":"center"}},"http文件验证，内置的独立 Web 服务器")],-1)),i[7]||(i[7]=s("tr",null,[s("td",{style:{"text-align":"center"}},"Standalone tls alpn"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❌"),s("td",{style:{"text-align":"center"}},"http文件验证，内置的独立 TLS Web 服务器")],-1)),s("tr",null,[s("td",G,[i[0]||(i[0]=a("⭐ DNS API ")),n(p,{type:"tip",text:"推荐"})]),i[1]||(i[1]=s("td",{style:{"text-align":"center"}},"✔️",-1)),i[2]||(i[2]=s("td",{style:{"text-align":"center"}},"✔️",-1)),i[3]||(i[3]=s("td",{style:{"text-align":"center"}},"✔️",-1)),i[4]||(i[4]=s("td",{style:{"text-align":"center"}},"DNS自动验证，域名商支持API，可通过api自动添加txt记录",-1))]),i[8]||(i[8]=s("tr",null,[s("td",{style:{"text-align":"center"}},"DNS manual"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"DNS手动验证，域名商不支持API，可通过手动添加txt记录")],-1)),i[9]||(i[9]=s("tr",null,[s("td",{style:{"text-align":"center"}},"DNS alias"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"DNS别名验证，域名商A不支持API，域名商B支持API，将域名商A的域名指向域名商B使用")],-1)),i[10]||(i[10]=s("tr",null,[s("td",{style:{"text-align":"center"}},"Apache"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❌"),s("td",{style:{"text-align":"center"}},"Apache验证，实际也是http文件验证，直接使用 apache 来颁发证书")],-1)),i[11]||(i[11]=s("tr",null,[s("td",{style:{"text-align":"center"}},"Nginx"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❌"),s("td",{style:{"text-align":"center"}},"Apache验证，实际也是http文件验证，直接使用 nginx 来颁发证书")],-1)),i[12]||(i[12]=s("tr",null,[s("td",{style:{"text-align":"center"}},"混合模式"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"✔️"),s("td",{style:{"text-align":"center"}},"❔"),s("td",{style:{"text-align":"center"}},"所有申请模式混合使用")],-1))])]),i[16]||(i[16]=t(`<details class="details custom-block"><summary>webroot</summary><p>通过自动创建 <code>.well-known</code> 文件夹并生成验证文件，CA访问文件所在的链接验证</p><p>申请完成后，会告知我们证书所在的文件夹</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>-w：使用webroot模式，并指定网站所在的目录，一般为 <code>www</code>。为什么官方是 <code>/home/</code> 呢，因为这是非root用户目录</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /www/wwwroot/example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /www/wwwroot/example.com</span></span></code></pre></div><p><img src="`+v+`" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>Standalone</summary><p>独立模式，此方式需要占用80端口</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看80端口占用情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :80</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LISTEN</span></span></code></pre></div><p>未占用就直接申请，如下图被占用，改端口申请即可</p><p><img src="`+D+`" alt="" loading="lazy"></p><p>申请完成后，会告知我们证书所在的文件夹</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--standalone：使用独立模式</li><li>--httpport：指定端口</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --standalone</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名改用88端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --standalone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --httpport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 88</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --standalone</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名改用88端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --standalone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --httpport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 88</span></span></code></pre></div><p><img src="`+A+`" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>Standalone tls alpn</summary><p>使用独立模式TLS，此方式需要占用443端口</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看443端口占用情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :443</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LISTEN</span></span></code></pre></div><p>未占用就直接申请，如下图被占用，改端口申请即可</p><p><img src="`+f+`" alt="" loading="lazy"></p><p>申请完成后，会告知我们证书所在的文件夹</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--alpn：使用独立模式TLS</li><li>--httpport：指定端口</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alpn</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名改用8443端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alpn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tlsport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8443</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alpn</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名改用8443端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alpn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tlsport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8443</span></span></code></pre></div><p><img src="`+w+'" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>DNS API ⭐</summary><p>在 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>dnsapi</code>，在 <a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi" target="_blank" rel="noreferrer">dnsapi</a> 或 <a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi2" target="_blank" rel="noreferrer">dnsapi2</a> 找到自己的域名提供商</p><p><img src="'+_+'" alt="" loading="lazy"></p><p>我的域名是腾讯旗下的 <a href="https://dnspod.cn" target="_blank" rel="noreferrer">DNSPod</a> ，我用它演示</p><p><img src="'+S+'" alt="" loading="lazy"></p><p>在 <a href="https://console.dnspod.cn/" target="_blank" rel="noreferrer">DnsPod后台</a> - 用户 - API密钥 - DnsPod Token，创建密钥</p><p><img src="'+N+'" alt="" loading="lazy"></p><p>名称随便输吧</p><p><img src="'+z+'" alt="" loading="lazy"></p><p>这里的 <code>ID</code> 和 <code>Token</code> 分别复制，填入</p><p>注意！token只显示一次！</p><p><img src="'+I+`" alt="" loading="lazy"></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DP_Id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;id&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DP_Key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;key&gt;&quot;</span></span></code></pre></div><details class="details custom-block"><summary>DP_Id 和 DP_Key 忘记了咋办</summary><p>如果你已经填入服务器了，直接 <code>env</code> 查看环境变量即可，如果没有，那就重新创建</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">env</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在输出中找到</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DP_Key=******</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DP_Id=***</span></span></code></pre></div></details><p><img src="`+P+`" alt="" loading="lazy"></p><p>一次配置永久有效，以后使用直接申请即可</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--dns：使用DNS验证</li><li>dns_dp：使用DNSPod api模式</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 泛域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span></span></code></pre></div><p><img src="`+q+'" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>DNS manual</summary><p>DNS手动模式，如果你的域名商没有api，就用此方式，但是无法自动续签！</p><p>在 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>dns</code>，点击 <a href="https://github.com/acmesh-official/acme.sh/wiki/DNS-manual-mode" target="_blank" rel="noreferrer">DNS manual mode</a></p><p><img src="'+T+`" alt="" loading="lazy"></p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--dns：使用DNS验证</li><li>yes-I-know-dns-manual-mode-enough-go-ahead-please：确定使用手动模式</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 泛域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span></code></pre></div><p><img src="`+V+'" alt="" loading="lazy"></p><p>在域名商提供的DNS解析处，添加TXT记录，我用的腾讯云的 <a href="https://www.dnspod.cn/" target="_blank" rel="noreferrer">DNSPod</a> 演示</p><p>验证完成后，记得删除TXT记录，已经没用了</p><div class="tip custom-block"><p class="custom-block-title">说明</p><p>主机记录：填提供的Domain <code>_acme-challenge</code></p><p>记录类型：TXT</p><p>记录值：TXT value</p></div><div class="warning custom-block"><p class="custom-block-title">特别注意！这里的TXT值，只需要复制域名前部分</p><ul><li><p>一级域名申请：比如解析值是 _acme-challenge.baidu.com，你只需要 <code>_acme-challenge</code></p></li><li><p>二级域名申请：比如解析值是 _acme-challenge.baike.baidu.com，你只需要 <code>_acme-challenge.baike</code></p></li></ul></div><p><img src="'+L+`" alt="" loading="lazy"></p><p>然后我们重新申请一次</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>renew：更新证书</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 泛域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --yes-I-know-dns-manual-mode-enough-go-ahead-please</span></span></code></pre></div><p><img src="`+O+'" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>DNS alias</summary><p>DNS别名模式，如果你的域名商不支持api，又想用api方式，那么别名模式可以实现</p><p>在 <a href="https://github.com/acmesh-official/acme.sh/wiki/" target="_blank" rel="noreferrer">wiki</a>，搜索 <code>dns</code>，点击 <a href="https://github.com/acmesh-official/acme.sh/wiki/DNS-alias-mode" target="_blank" rel="noreferrer">DNS alias mode</a></p><p><img src="'+H+`" alt="" loading="lazy"></p><p>你需要准备两个域名，并设置设置域名CNAME</p><ul><li><p>A域名：<code>example.com</code> (不支持api)</p></li><li><p>B域名：<code>aliasDomainForValidationOnly.com</code> (支持api)</p></li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.example.com</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># _acme-challenge.example.com	IN	CNAME	_acme-challenge.aliasDomainForValidationOnly.com.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.example.com</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.www.example.com</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.example.org</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly.com</span></span></code></pre></div><p>然后，你需要按照 <a href="#申请证书">DNS API的教程</a>给支持API的域名，正确配置好环境变量，再开始申请</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--challenge-alias：别名域</li><li>--dns：使用DNS验证</li><li>dns_dp：使用DNSPod api模式</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aliasDomainForValidationOnly.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aliasDomainForValidationOnly.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.org</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 泛域名，可混合</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aliasDomainForValidationOnly.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.example.org</span></span></code></pre></div><p>你还可以使用混合模式，不同的别名域，不同的DNS商</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 别名域1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.example.com</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 别名域2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_acme-challenge.example.net</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_acme-challenge.aliasDomainForValidationOnly2.com</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --challenge-alias no 不使用别名域</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  alias.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aliasDomainForValidationOnly.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_dp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  example.net</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --challenge-alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aliasDomainForValidationOnly2.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_cf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span></code></pre></div></details><details class="details custom-block"><summary>Apache</summary><p>我的服务器没有安装 <a href="https://www.apache.org/" target="_blank" rel="noreferrer">阿帕奇</a> ，无法提供演示</p><p>而同样的Nginx有占用低、高并发、扩展服务器集群等优势</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --apache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --apache</span></span></code></pre></div></details><details class="details custom-block"><summary>Nginx</summary><p>如果已经安装了 Nginx，可以直接用 nginx 来颁发，证书颁发后会恢复你的 nginx conf</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看nginx版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre></div><p><img src="`+X+`" alt="" loading="lazy"></p><p>确定安装了nginx，我们就直接来申请吧</p><div class="tip custom-block"><p class="custom-block-title">说明</p><ul><li>--issue：颁发证书</li><li>-d：指定需要申请证书的域名</li><li>--nginx：使用 nginx 服务器来颁发</li></ul></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 文件无法找到时，指定文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/nginx.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定网站配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/nginx/conf.d/example.com.conf</span></span></code></pre></div><p><img src="`+M+`" alt="" loading="lazy"></p></details><details class="details custom-block"><summary>混合模式</summary><p>请先了解其他模式的使用后，再来尝试</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 混合模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">aa.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/wwwroot/aa.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bb.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns_cf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cc.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --apache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dd.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/wwwroot/dd.com</span></span></code></pre></div></details><h2 id="查看证书" tabindex="-1">查看证书 <a class="header-anchor" href="#查看证书" aria-label="Permalink to &quot;查看证书&quot;">​</a></h2><p>申请好了，我们用命令查看一下证书</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --list</span></span></code></pre></div><p>默认是 <code>ec-256</code> 证书，可以根据自己喜好申请时更改</p><details class="details custom-block"><summary>ECC证书和RSA证书</summary><ul><li><p>RSA：非对称加密算法，普及率高，但密钥较长，安全性一般</p></li><li><p>ECC：椭圆加密算法(Elliptic Curve Cryptography)，密钥短，安全性高，建议使用</p></li></ul><table tabindex="0"><thead><tr><th style="text-align:center;">RSA密钥长度</th><th style="text-align:center;">ECC密钥长度</th><th style="text-align:center;">使用（在申请证书命令后添加）</th></tr></thead><tbody><tr><td style="text-align:center;">2048</td><td style="text-align:center;">-</td><td style="text-align:center;"><code>--keylength 2048</code></td></tr><tr><td style="text-align:center;">3072</td><td style="text-align:center;">256</td><td style="text-align:center;"><code>--keylength 3072</code><br><code>--keylength ec-256</code></td></tr><tr><td style="text-align:center;">4096</td><td style="text-align:center;">-</td><td style="text-align:center;"><code>--keylength 4096</code></td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">384</td><td style="text-align:center;"><code>--keylength ec-384</code></td></tr><tr><td style="text-align:center;">8192</td><td style="text-align:center;">-</td><td style="text-align:center;"><code>--keylength 8192</code></td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">521</td><td style="text-align:center;"><code>--keylength ec-521</code></td></tr></tbody></table></details><p><img src="`+$+`" alt="" loading="lazy"></p><p>证书所在的目录，我们可以cd进去看一下</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进acme.sh目录并列出</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.acme.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进域名ECC证书文件夹并列出</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 你的域名.com_ecc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 回到根目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">！说明：其中 <code>*.key</code> 和 <code>fullchain.cer</code> 是安装所需要的文件</p><ul><li><p><u>.com.key：私钥</u></p></li><li><p>.com.cer：域名证书</p></li><li><p>ca.cer：CA颁发的中间证书</p></li><li><p><u>fullchain.cer：证书链（域名证书+中间证书）</u></p></li><li><p>.com.csr：证书签名请求</p></li><li><p>.com.csr.conf：证书签名请求配置文件</p></li></ul></div><p><img src="`+K+'" alt="" loading="lazy"></p><h2 id="安装证书" tabindex="-1">安装证书 <a class="header-anchor" href="#安装证书" aria-label="Permalink to &quot;安装证书&quot;">​</a></h2><p>在wiki中已有详细的 <a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E" target="_blank" rel="noreferrer">中文教程</a>，如果还是没看懂，等我有空了补吧</p><p>使用Nginx演示，先查看nginx所在目录</p><details class="details custom-block"><summary>命令无效?</summary><p>没有安装nginx，如果你使用了宝塔，无需使用acme.sh</p></details><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span></span></code></pre></div><p><img src="'+R+`" alt="" loading="lazy"></p><p>这里的 <code>/path/to/..</code> 要改成自己证书所在目录</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install-cert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--key-file       </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/path/to/keyfile/in/nginx/key.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--fullchain-file </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/path/to/fullchain/nginx/cert.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--reloadcmd     </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;service nginx force-reload&quot;</span></span></code></pre></div><p>最后修改下Ngix.conf文件，指定证书路径即可</p><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看帮助</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 列出所有证书</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --info</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看域名配置，多域名证书填主域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --info</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 升级并设置自动升级</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --auto-upgrade</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#关闭自动升级</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --auto-upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 定时任务自动续签证书</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -l</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行定时器，续期所有证书</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cron</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 强制签发证书</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定域密钥长度，默认：ec-256 或 ec-384、ec-521、2048、3072、4096、8192</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --keylength</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ec-256</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看bug日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --issue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 续期指定证书，若没到期也可使用--force强制更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># # 续期所有证书，若没到期也可使用--force强制更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --renew-all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置默认CA，目前脚本默认为zerossl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set-default-ca</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> letsencrypt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 移除证书，只是移除自动更新和管理，证书文件不会删除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --remove</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 卸载 cron计划任务也会被移除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acme.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uninstall</span></span></code></pre></div>`,30))])}const ns=h(Z,[["render",W]]);export{as as __pageData,ns as default};
